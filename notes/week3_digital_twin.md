# Week 3：Digital Twin ─ 物理プロセスのデジタル再現

## 目的

- ミニ工場レイアウト（机 or コンベア + 部品 + ロボット + カメラ）を構築する
- 1サイクルの作業フローをシミュレートし、時間や課題を把握する
- カメラ配置・動線・干渉などを評価し、レイアウト改善案を2パターン作成する

---

## タスク一覧

### Task 3-1：ミニ工場レイアウトの構築

**ゴール:** ミニ工場を模したDigital Twinシーンを作成し、USDとして保存する。

1. Isaac Sim で新規シーンを作成：

2. 以下の要素を配置：

   - Ground Plane
   - 搬送ライン（机 or コンベア的なオブジェクト）
   - 部品置き場（小さな Box 複数）
   - ロボットアーム（Week2で使用したもの）
   - 上部カメラ（俯瞰視点）
   - 側面カメラ（ロボット周辺）

3. シーンを `week3_mini_factory.usd` として保存。

4. レイアウトメモ：

   ```markdown
   ## ミニ工場レイアウト構成（week3_mini_factory.usd）

   - 搬送ライン: X軸正方向に長い机を配置
   - 部品置き場: 机左端に Box を3つ
   - ロボット: 机中央付近に配置（左側からピックできる位置）
   - カメラ1: 上部俯瞰（Factory 全体）
   - カメラ2: ロボット横からエンドエフェクタ付近を見る位置
   ```

---

### Task 3-2：1サイクルの作業フロー・シミュレーション

**ゴール:** 1サイクル（部品供給→ピック→配置）をシミュレートし、サイクルタイムを測る。

1. 作業フローを定義：

   - 初期状態：部品(Box)が机左端に1つ
   - ロボットはBoxを掴み、机右端のパレット上に置く

2. シミュレーション実行：

   - Start時刻を記録（例: t=0）
   - End時刻（部品設置完了）を記録

3. `logs/week3_tasks.md` に記録：

   ```markdown
   ## Task 3-2: 1サイクル作業フロー

   - 開始: t = 0.0s
   - 終了: t = 7.2s
   - サイクルタイム: 7.2s
   - 観察メモ:
     - アプローチ時に少し遠回りな軌道
     - グリッパ閉じ動作の待ち時間が長め
   ```

---

### Task 3-3：カメラ・センサー視点の評価（死角チェック）

**ゴール:** カメラ2台構成で、視野や死角を確認する。

1. カメラ1（俯瞰カメラ）の視野：

   - 机全体 + ロボットが十分に映っているか
   - ロボットの動きで部品が隠れないか

2. カメラ2（側面）の視野：

   - 把持時のエンドエフェクタ + 部品が見えるか
   - ロボット本体に隠れないか

3. 気づいた点を記録：

   ```markdown
   ## カメラ視野と死角に関するメモ

   - カメラ1（俯瞰）:
     - 机全体は見えるが、エンドエフェクタの細かい動作は分かりづらい
   - カメラ2（側面）:
     - 把持動作は良く見えるが、パレット側は死角になりがち
   ```

---

### Task 3-4：レイアウト改善案（2パターン）の作成

**ゴール:** 実運用を意識したレイアウト・センサー構成の改善案を2パターン作る。

1. パターンA：  
   - ロボットの位置を少し右に移動  
   - カメラ1の高さを上げ、俯角を調整  
   - `week3_mini_factory_A.usd` として保存

2. パターンB：  
   - カメラを3台構成に変更（俯瞰 + 2側面）  
   - ロボット周辺に安全柵オブジェクトを追加  
   - `week3_mini_factory_B.usd` として保存

3. 各パターンで1サイクルシミュレーションを再実行し、`logs/week3_tasks.md` に比較を書く：

   ```markdown
   ## レイアウト改善案比較

   ### パターンA
   - サイクルタイム: 6.8s（0.4s 短縮）
   - メリット: アプローチ距離が短くなった
   - デメリット: ロボット基部と机の干渉リスクが増加

   ### パターンB
   - サイクルタイム: 7.3s（ほぼ変化なし）
   - メリット: 視認性向上、安全柵で安全性の訴求が可能
   - デメリット: モデルとしては少し重くなる
   ```

---

## Week 3 のふりかえりテンプレ

```markdown
### Week 3 ふりかえり

- Digital Twin を作ってみて見えてきた「現場の制約・工夫」:
- カメラ配置・動線設計で難しいと感じた点:
- 「AIのための世界モデル」としてどう設計すべきか、気づいたこと:
- Week 4 で試したい AI 学習（模倣 or 自己学習）のアイデア:
```
